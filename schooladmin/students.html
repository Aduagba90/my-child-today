<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Students - My Child Today</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Custom Dashboard CSS + Inline Adjustments -->
  <link rel="stylesheet" href="css/dashboard.css">
  <style>
    .stat-card { transition: transform 0.2s; }
    .stat-card:hover { transform: scale(1.03); }
    .stat-icon { font-size: 2rem; color: #198754; }
    @media (max-width: 768px) { .chart-container { margin-top: 1rem; } }

    /* Floating CTA Button */
    .floating-cta {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #0d6efd;
      color: white;
      padding: 12px 20px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: background-color 0.2s, transform 0.2s;
      z-index: 1000;
    }
    .floating-cta:hover {
      background-color: #0b5ed7;
      transform: scale(1.05);
    }

    /* Make all text smaller across the dashboard */
/* --------------------------------------
Global Font & Layout Adjustments
--------------------------------------- */
body, .sidebar, .content, .card, .table, button, a, h1, h2, h3, h4, h5, h6, p, span, td, th {
  font-size: 11px !important;
  line-height: 1.2 !important;
  font-family: 'Roboto', sans-serif;
  color: #333;
}

/* Headings slightly larger for clarity */
h1, h2, h3 {
  font-size: 13px !important;
  font-weight: 600 !important;
}

/* --------------------------------------
Sidebar Styling (Fixed + Gray Theme)
--------------------------------------- */
.sidebar {
  width: 190px !important;
  min-height: 100vh;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
  overflow-y: auto;
  background-color: #2f3e46;
  color: #fff !important;
  z-index: 100;
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
}


/* Sidebar Header */
.sidebar .sidebar-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 0.8rem;
  padding: 0 10px;
}
.sidebar .sidebar-header span {
  font-size: 11px !important;
  font-weight: 600;
  color: #fff !important;
}

/* Sidebar Links */
.sidebar .nav-links {
  flex-grow: 1;
}
.sidebar .nav-link {
  display: flex;
  align-items: center;
  font-size: 10.5px !important;
  padding: 6px 10px !important;
  border-radius: 6px;
  color: #e0e0e0 !important;
  transition: background 0.25s ease, color 0.25s ease;
}
.sidebar .nav-link i {
  font-size: 13px !important;
  margin-right: 6px;
}

/* Active or Hover States */
.sidebar .nav-link:hover,
.sidebar .nav-link.active {
  background-color: #009688; /* teal-blue highlight */
  color: #fff !important;
}

/* --------------------------------------
Logout Button (Bottom of Sidebar)
--------------------------------------- */
.logout-section {
  padding: 0.5rem 10px !important;
  width: 100%;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
}
.logout-btn {
  font-size: 10px !important;
  padding: 5px 8px !important;
  border-radius: 5px !important;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  width: 100%;
  background-color: #dc3545;
  color: #fff !important;
  border: none;
  transition: background 0.2s ease;
}
.logout-btn i {
  font-size: 12px !important;
}
.logout-btn:hover {
  background-color: #c82333;
}

/* --------------------------------------
Dashboard Content Area
--------------------------------------- */
.content {
  margin-left: 190px;
  padding: 1rem !important;
  font-size: 11px !important;
  background-color: #f8f9fa;
  min-height: 100vh;
}

/* --------------------------------------
Cards and Stats
--------------------------------------- */
.card {
  padding: 0.6rem !important;
  border-radius: 8px !important;
  box-shadow: 0 1px 4px rgba(0,0,0,0.05);
  background-color: #fff;
}
.stat-card h6 {
  font-size: 10px !important;
}
.stat-card h3 {
  font-size: 15px !important;
}
.stat-icon {
  font-size: 1.2rem !important;
}

/* --------------------------------------
Tables
--------------------------------------- */
.table th, .table td {
  font-size: 10px !important;
  padding: 4px 6px !important;
  vertical-align: middle !important;
}
.table th {
  font-weight: 600 !important;
}

/* --------------------------------------
Charts
--------------------------------------- */
.chart-container {
  font-size: 10px !important;
}
canvas {
  max-height: 180px !important;
}

/* --------------------------------------
Floating CTA
--------------------------------------- */
.floating-cta {
  font-size: 10.5px !important;
  padding: 7px 12px !important;
  border-radius: 30px !important;
  position: fixed;
  bottom: 25px;
  right: 25px;
  z-index: 200;
  background-color: #009688;
  color: #fff;
  border: none;
  transition: background 0.25s ease;
}
.floating-cta:hover {
  background-color: #00796b;
}

/* --------------------------------------
Alignment Cleanup
--------------------------------------- */
.row, .col-md-4, .col-md-6 {
  margin: 0 !important;
  padding: 0.3rem !important;
}







  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="d-flex">
    <nav class="sidebar">
      <div class="sidebar-header d-flex align-items-center mb-4">
        <i class="bi bi-mortarboard-fill text-white me-2 sidebar-icon"></i>
        <span class="fw-bold">School Admin</span>
      </div>
      <ul class="nav flex-column px-3">
        <li class="nav-item"><a href="dashboard.html" class="nav-link"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
        <li class="nav-item"><a href="students.html" class="nav-link active"><i class="bi bi-people me-2"></i>Students</a></li>
        <li class="nav-item"><a href="attendance.html" class="nav-link"><i class="bi bi-check-circle me-2"></i>Attendance</a></li>
        <li class="nav-item"><a href="sms.html" class="nav-link"><i class="bi bi-chat-dots me-2"></i>SMS</a></li>
        <li class="nav-item"><a href="reports.html" class="nav-link"><i class="bi bi-graph-up me-2"></i>Reports</a></li>
      </ul>
      <div class="logout-section mt-auto px-3 mb-3">
        <button class="btn logout-btn w-100" id="logoutBtn">
          <i class="bi bi-box-arrow-right me-2"></i>Logout
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="content flex-grow-1 p-4">

      <!-- Search Bar -->
      <div class="search-bar mb-4">
        <div class="input-group w-100 w-md-50">
          <span class="input-group-text bg-white border-end-0"><i class="bi bi-search text-muted"></i></span>
          <input type="text" id="searchInput" class="form-control border-start-0" placeholder="Search students...">
        </div>
      </div>

      <!-- Student Management Header -->
      <h5 class="fw-bold mb-4">Student Management</h5>

      <!-- Action Buttons -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <button class="btn btn-success me-2" id="addStudentBtn">
            <i class="bi bi-plus-circle me-1"></i> Add Student
          </button>

          <button class="btn btn-primary me-2" id="editSelectedBtn"><i class="bi bi-pencil-square me-1"></i> Edit Selected</button>
          <button class="btn btn-danger" id="deleteSelectedBtn"><i class="bi bi-trash3 me-1"></i> Delete Selected</button>
        </div>
        <div>
          <button class="btn btn-outline-success" id="importCsvBtn"><i class="bi bi-file-earmark-arrow-up me-1"></i> Import CSV/Excel</button>
        </div>
      </div>

      <!-- Students Table -->
      <div class="card shadow-sm p-3">
        <div class="table-responsive">
          <table class="table table-hover align-middle" id="studentsTable">
            <thead class="table-light">
              <tr>
                <th><input type="checkbox" id="selectAll"></th>
                <th>Student Name</th>
                <th>Class</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Reg. No (ID)</th>
                <th>Email</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="studentsTableBody">
              <!-- Dynamic rows populated by JS -->
            </tbody>
          </table>
        </div>
      </div>

    </main>
  </div>

  <!-- Floating CTA Add Student Button -->
  <button class="btn btn-success" id="floatingAddBtn" data-bs-toggle="modal" data-bs-target="#addEditModal">
    <i class="bi bi-plus"></i>
  </button>

  <!-- Add/Edit Student Modal -->
  <div class="modal fade" id="addEditModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="studentForm">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Add Student</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="rowIndex">
            <div class="mb-3">
              <label for="studentName" class="form-label">Name</label>
              <input type="text" class="form-control" id="studentName" required>
            </div>
            <div class="mb-3">
              <label for="studentClass" class="form-label">Class</label>
              <input type="text" class="form-control" id="studentClass" required>
            </div>
            <div class="mb-3">
              <label for="studentAge" class="form-label">Age</label>
              <input type="number" class="form-control" id="studentAge" required>
            </div>
            <div class="mb-3">
              <label for="studentGender" class="form-label">Gender</label>
              <select class="form-select" id="studentGender" required>
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="studentReg" class="form-label">Reg. No (ID)</label>
              <input type="text" class="form-control" id="studentReg" required>
            </div>
            <div class="mb-3">
              <label for="studentEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="studentEmail" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Students JS -->
  <script>
    let students = [
      { name: 'Aliyu Musa', class: 'JSS 2A', age: 12, gender: 'Male', reg: 'STU00123', email: 'aliyu.musa@email.com' },
      { name: 'Maryam Bello', class: 'SSS 1B', age: 15, gender: 'Female', reg: 'STU00456', email: 'maryam.bello@email.com' },
      { name: 'Kehinde Ade', class: 'JSS 3B', age: 13, gender: 'Male', reg: 'STU00987', email: 'kehinde.ade@email.com' }
    ];

    const tableBody = document.getElementById('studentsTableBody');
    const searchInput = document.getElementById('searchInput');

    function renderTable(filter = '') {
      tableBody.innerHTML = '';
      students.forEach((student, index) => {
        if (Object.values(student).some(val => val.toString().toLowerCase().includes(filter.toLowerCase()))) {
          tableBody.innerHTML += `
            <tr>
              <td><input type="checkbox" class="rowCheckbox" data-index="${index}"></td>
              <td>${student.name}</td>
              <td>${student.class}</td>
              <td>${student.age}</td>
              <td>${student.gender}</td>
              <td>${student.reg}</td>
              <td>${student.email}</td>
              <td>
                <button class="btn btn-sm btn-outline-primary" onclick="editRow(${index})"><i class="bi bi-pencil"></i></button>
                <button class="btn btn-sm btn-outline-danger" onclick="deleteRow(${index})"><i class="bi bi-trash"></i></button>
              </td>
            </tr>
          `;
        }
      });
    }

    renderTable();
    searchInput.addEventListener('input', e => renderTable(e.target.value));

    const studentForm = document.getElementById('studentForm');
    const modalTitle = document.getElementById('modalTitle');
    const rowIndexInput = document.getElementById('rowIndex');

    // Add Student Button Opens Modal In Add Mode
      document.getElementById('addStudentBtn').addEventListener('click', function () {
        modalTitle.textContent = 'Add Student';
        rowIndexInput.value = '';
        studentForm.reset();
        new bootstrap.Modal(document.getElementById('addEditModal')).show();
      });


    studentForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const newStudent = {
        name: document.getElementById('studentName').value,
        class: document.getElementById('studentClass').value,
        age: parseInt(document.getElementById('studentAge').value),
        gender: document.getElementById('studentGender').value,
        reg: document.getElementById('studentReg').value,
        email: document.getElementById('studentEmail').value
      };
      const idx = rowIndexInput.value;
      if (idx === '') {
        students.push(newStudent);
      } else {
        students[idx] = newStudent;
      }
      rowIndexInput.value = '';
      studentForm.reset();
      bootstrap.Modal.getInstance(document.getElementById('addEditModal')).hide();
      renderTable(searchInput.value);
    });

    function editRow(index) {
      const student = students[index];
      modalTitle.textContent = 'Edit Student';
      rowIndexInput.value = index;
      document.getElementById('studentName').value = student.name;
      document.getElementById('studentClass').value = student.class;
      document.getElementById('studentAge').value = student.age;
      document.getElementById('studentGender').value = student.gender;
      document.getElementById('studentReg').value = student.reg;
      document.getElementById('studentEmail').value = student.email;
      new bootstrap.Modal(document.getElementById('addEditModal')).show();
    }

    function deleteRow(index) {
      if (confirm('Are you sure you want to delete this student?')) {
        students.splice(index, 1);
        renderTable(searchInput.value);
      }
    }

    document.getElementById('selectAll').addEventListener('change', function() {
      document.querySelectorAll('.rowCheckbox').forEach(cb => cb.checked = this.checked);
    });

    document.getElementById('logoutBtn').addEventListener('click', function() {
      if (confirm("Are you sure you want to logout?")) {
        window.location.href = "../login.html";
      }
    });
  </script>
</body>
</html>
